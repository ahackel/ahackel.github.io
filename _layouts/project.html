---
layout: default
---
<div class="content-sidebar">
	{% assign url = page.url | remove: "/index.html" | slice: 1,1000 %}
	{% assign projects = site.collections | where:'label',"projects" | first %}
	{% assign files = projects.files |Â where_exp:"file", "file.path contains url"  %}

	{% assign index = -1 %}
	{% for project in site.projects %}
		{% if project.url contains url %}
			{% assign index = forloop.index | minus: 1 %}
		{% endif %}
	{% endfor %}

	{% assign prev = index | minus: 1 %}
	{% assign next = index | plus: 1  %}

	{% include gallery.html images = page.images %}

	{% if prev > 0 %}
	<a href="{{ site.projects[prev].url | remove: "/index.html" }}" class="prev-gallery">
		<i class="fa fa-chevron-left fa-3x" aria-hidden="true"></i>
	</a>
	{% endif %}
	{% if next < site.projects.size %}
	<a href="{{ site.projects[next].url | remove: "/index.html" }}" class="next-gallery">
		<i class="fa fa-chevron-right fa-3x" aria-hidden="true"></i>
	</a>
	{% endif %}
	<a href="/projects" class="close-gallery">
		<i class="fa fa-times fa-3x" aria-hidden="true"></i>
	</a>
</div>

<div class="sidebar">
	<h1>{{ page.title }}</h1>
	{{ content }}
	<table>
		{% include tag.html tag=page.type label="Type" %}
		{% include date.html tag=page.year label="Date" %}
		{% include tags.html tags=page.role label="Role" %}
		{% include tags.html tags=page.developer label="Developer" %}
		{% include tags.html tags=page.publisher label="Publisher" %}
		{% include tags.html tags=page.client label="Client" %}
		{% include tags.html tags=page.tools label="Tools" %}
		{% include tags.html tags=page.platform label="Platform" %}
	</table>
	<hr/>
	<footer>
		&copy; 2016, Andreas Hackel
	</footer>
</div>

<script src="/lib/flex-images.js"></script>

	<script>
		new flexImages({
			selector: '.gallery',
			rowHeight: 1000
		});
	</script>

	<script>
	// Keyboard navigation:
		document.addEventListener('keyup', e => {
			if (e.target.nodeName != 'INPUT') {
				switch (e.code) {
					case 'Escape':
						window.location = '/projects';
						e.preventDefault();
						break;
					{% if prev > 0 %}
					case 'ArrowLeft':
						window.location = '{{ site.projects[prev].url | remove: "/index.html" }}';
						e.preventDefault();
						break;
					{% endif %}
					{% if next < site.projects.size %}
					case 'ArrowRight':
						window.location = '{{ site.projects[next].url | remove: "/index.html" }}';
						e.preventDefault();
						break;
					{% endif %}
				}
			}
		}, false);
	</script>
